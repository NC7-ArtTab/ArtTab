<!DOCTYPE html>
<html
        lang="ko"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        xmlns:https="http://www.w3.org/1999/xhtml">
<head th:replace="~{fragment/config :: configFragment}"></head>
<body>
<div class="container">
  <header th:replace="~{fragment/header :: headerFragment}"></header>


  <div>
    <a data-th-href="@{/art/list}" data-th-text="${art.artStatus}" >상태 </a>
    <a data-th-href="@{/art/list/동양화}" data-th-text="${art.artCategory}" >카테고리 </a>
    <a data-th-text="${art.artTitle}" >제목 </a>

  </div>

  <div layout:fragment="content">
    <div>
      <img src="https://cdn.shopify.com/s/files/1/1047/6452/products/tricko1_1024x1024.jpg?v=1447104179" width="50" height="70">
      <img src="https://cdn.shopify.com/s/files/1/1047/6452/products/tricko1_1024x1024.jpg?v=1447104179" width="50" height="70">
      <img src="https://cdn.shopify.com/s/files/1/1047/6452/products/tricko1_1024x1024.jpg?v=1447104179" width="50" height="70">
      <img src="https://cdn.shopify.com/s/files/1/1047/6452/products/tricko1_1024x1024.jpg?v=1447104179" width="50" height="70">
    </div>

    <div>
      <h2 th:text="${art.artTitle}">제목</h2>
      <h4>경매 시작가</h4>
      <h4 th:text="${art.startPrice}">시작가</h4>
      <h4>현재 입찰가</h4>
      <!--      <h4 th:text="${#lists.last(art.artBids).bidPrice}">시작가</h4>-->
      <h4 th:text="${list[0].bidPrice}">시작가</h4>
      <h4>작품 설명</h4>
      <p th:text="${art.artContent}">내용</p>
      <div>
        <h5>경매 기간</h5>
        <span data-th-text="${art.startDatetime + '~' + art.endDatetime}"></span>
        <input id="end_datetime" type="hidden" data-th-value="${art.endDatetime}">

        <div class="sec7-text-box">
          <p>오픈날짜</p>
          <p class="runTimeCon">오픈날짜를 작성해주세요</p>
          <hr/>
          <p class="time-title">남은 시간</p>
          <div class="time">
            <span id="d-day-hour">00</span>
            <span class="col">:</span>
            <span id="d-day-min">00</span>
            <span class="col">:</span>
            <span id="d-day-sec">00</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer th:replace="~{fragment/footer:: footerFragment}"></footer>
</div>
</body>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script>
  window.onload = function(){
      function remaindTime() {
          var now = new Date(); //현재시간을 구한다.
          var open = new Date($("#end_datetime").val());
          var nowTime = now.getTime(); // 현재의 시간만 가져온다
          var finishTime = open.getTime(); // 경매마감 시간만 가져온다


          if(nowTime<finishTime){ //현재시간이 경매마감시간 보다 이르면 오픈시간까지의 남은 시간을 구한다.
              sec = parseInt(finishTime - nowTime) / 1000;
              hour = parseInt(sec/60/60);
              sec = (sec - (hour*60*60));
              min = parseInt(sec/60);
              sec = parseInt(sec-(min*60));

              if(hour<10){hour="0"+hour;}
              if(min<10){min="0"+min;}
              if(sec<10){sec="0"+sec;}
              $("#d-day-hour").html(hour);
              $("#d-day-min").html(min);
              $("#d-day-sec").html(sec);
          } else{ //현재시간이 종료시간보다 크면
              $("#d-day-hour").html('00');
              $("#d-day-min").html('00');
              $("#d-day-sec").html('00');
          }
      }
      setInterval(remaindTime,1000); //1초마다 검사를 해주면 실시간으로 시간을 알 수 있다.

  }
</script>
</html>